<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clearkey DRM MPD Video Streaming</title>
</head>
<body>
  <!-- Video Player -->
  <video id="video" width="640" height="360" controls></video>

  <!-- Join Telegram Button -->
  <a href="https://t.me/+e6G48oujQuExOTg1" target="_blank">
    <button>Join Telegram</button>
  </a>

  <!-- Shaka Player Library -->
  <script src="https://cdn.jsdelivr.net/npm/shaka-player@3.1.0/dist/shaka-player.compiled.js"></script>
  
  <script>
    // Initialize Shaka Player
    function initPlayer() {
      const videoElement = document.getElementById('video');
      const player = new shaka.Player(videoElement);

      // Error handling
      player.addEventListener('error', onErrorEvent);

      // DRM configuration for Clearkey
      const config = {
        drm: {
          clearKeys: {
            // Use the provided key ID and key value from your URL
            'cb8daf414566aa17d06f8294f3f3b444': '89d58908a57d70ef87bf16c9b5821ca2'
          }
        }
      };

      // Configure the player with the DRM settings
      player.configure(config);

      // Load the MPD manifest file
      player.load('https://a201aivottlinear-a.akamaihd.net/OTTB/pdx-nitro/live/clients/dash/enc/wr8i0xhnut/out/v1/190f1d69a3d5467f8fb7d9df4339bc49/cenc.mpd?|drmScheme=clearkey&drmLicense=cb8daf414566aa17d06f8294f3f3b444:89d58908a57d70ef87bf16c9b5821ca2')
        .then(function() {
          console.log('The video has been successfully loaded!');
        }).catch(onError); // Handle errors during the loading process
    }

    // Error handling function
    function onErrorEvent(error) {
      console.error('Error code', error.detail.code, 'object', error.detail);
    }

    // Initialize the player
    initPlayer();
  </script>
</body>
</html>
