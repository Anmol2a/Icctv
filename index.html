<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clearkey DRM MPD Video Streaming</title>
</head>
<body>
  <!-- Video Player -->
  <video id="video" width="200" height="150" controls></video>

  <!-- Join Telegram Button -->
  <a href="https://t.me/+e6G48oujQuExOTg1" target="_blank">
    <button>Join Telegram</button>
  </a>

  <!-- Shaka Player Library -->
  <script src="https://cdn.jsdelivr.net/npm/shaka-player@3.1.0/dist/shaka-player.compiled.js"></script>
  
  <script>
    // Initialize Shaka Player
    function initPlayer() {
      const videoElement = document.getElementById('video');
      const player = new shaka.Player(videoElement);

      // Error handling
      player.addEventListener('error', onErrorEvent);

      // DRM configuration for Clearkey
      const config = {
        drm: {
          clearKeys: {
            // Use the provided key ID and key value from your URL
            'ae7076b647133606b704d33e4cef5134': '810251515584cf71216d9a2d1ebf04bb'
          }
        }
      };

      // Configure the player with the DRM settings
      player.configure(config);

      // Load the MPD manifest file
      player.load('https://live-d-01-icc-we.akamaized.net/variant/v1blackout/vcg-01-d/DASH_DASH/Live/channel(vcg-01-ch-hd-02)/hdntl=exp=1740328395~acl=%2fvariant%2fv1blackout%2fvcg-01-d%2f*~data=hdntl~hmac=17eb82a32e2f37cd44acee6f917b97b901e0d63a387e9616eb1c0fca59bd7de9/manifest.mpd') 
        .then(function() {
          console.log('The video has been successfully loaded!');
        }).catch(onError); // Handle errors during the loading process
    }

    // Error handling function
    function onErrorEvent(error) {
      console.error('Error code', error.detail.code, 'object', error.detail);
    }

    // Initialize the player
    initPlayer();
  </script>
</body>
</html>
